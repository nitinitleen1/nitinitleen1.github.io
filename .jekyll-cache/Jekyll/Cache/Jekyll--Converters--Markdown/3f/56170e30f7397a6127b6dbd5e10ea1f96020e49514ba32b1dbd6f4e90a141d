I"A<p><img src="/assets/What-Is-AWS-Aurora-Database-Cloning.jpeg" alt="AWS Aurora Database Cloning" /></p>

<p>Aurora is one of the greatest inventions of AWSâ€™s managed database services. I recommend this everyone to use this instead of MySQL.
A few days back they have announced a new feature called Cloning the database. Initially, I taught this is same as restoring the database from the snapshot or point in time restore. But after reading the documentation, I was wondered about this feature and it pushed me to write this blog.</p>

<h2 id="how-itworks">How itÂ works:</h2>

<p>Basically its a Copy-on-Write Protocol. While cloning the database itâ€™ll take the database pages from the source database, So no need to copy the data from source database to cloned database. Also no additional storage for this. Then if you modify anything in the existing data pages on Source or Cloned database it wonâ€™t apply it to the actual data pages, instead, itâ€™ll create one more additional data page file and apply the changes there.</p>

<p>To understand this, I have pasted its process from the AWS documentation.</p>

<h2 id="before-databasecloning">Before databaseÂ cloning:</h2>

<p>Data in a source database is stored in pages. In the following diagram, the source database has 4 pages.</p>

<p><img src="/assets/What-Is-AWS-Aurora-Database-Cloning1.png" alt="What Is AWS Aurora Database Cloning" /></p>

<h2 id="after-databasecloning">After databaseÂ cloning:</h2>

<p>As shown in the following diagram, there are no changes in the source database. Both the source database and the clone database point to the same 4 pages. None of the pages have been physically copied, so no additional storage is required.</p>

<p><img src="/assets/What-Is-AWS-Aurora-Database-Cloning2.png" alt="What Is AWS Aurora Database Cloning" /></p>

<h2 id="when-a-change-occurs-on-the-source-database">When a change occurs on the source database:</h2>

<p>In the following example, the source database makes a change to the data in Page 1. Instead of writing to the original Page 1, additional storage is used to create a new page, called Page 1â€™. The source database now points to the new Page 1â€², as well as to Page 2, 3, and 4. The clone database continues to point to Page 1 through Page 4.</p>

<p><img src="/assets/What-Is-AWS-Aurora-Database-Cloning3.png" alt="What Is AWS Aurora Database Cloning" /></p>

<h2 id="when-a-change-occurs-on-the-clone-database">When a change occurs on the clone database:</h2>

<p>In the following diagram, the clone database has also made a change, this time in Page 4. Instead of writing to the original Page 4, additional storage is used to create a new page, called Page 4â€™. The source database continues to point to Page 1â€², as well as Page 2 through Page 4, but the clone database now points to Page 1 through Page 3, as well as Page 4â€².</p>

<p><img src="/assets/What-Is-AWS-Aurora-Database-Cloning4.png" alt="What Is AWS Aurora Database Cloning3" /></p>

<h2 id="limitations">Limitations:</h2>

<ul>
  <li>We can create upto 15 clones from any sources or clone to clone.</li>
  <li>We canâ€™t clone this to another region.</li>
  <li>Also we canâ€™t clone it to another account.</li>
</ul>

<h2 id="pros">Pros:</h2>

<ul>
  <li>Less time to provision.</li>
  <li>No additional cost for storage at the point of creation, so if we use this for reporting purpose then no cost for the storage.</li>
</ul>

<h2 id="cons">Cons:</h2>

<ul>
  <li>But if we cloned a database then the current data pages change(in the source) will apply on the new pages, so itâ€™ll involve additional cost for the new pages.</li>
</ul>
:ET